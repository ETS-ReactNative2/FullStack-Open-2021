(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,n,t){"use strict";t.r(n);var r=t(15),c=t.n(r),o=t(3),a=t(1),s=t(0),u=function(e){var n=e.filterValue,t=e.setFilterValue;return Object(s.jsxs)("div",{children:["filter shown with",Object(s.jsx)("input",{value:n,onChange:function(e){t(e.target.value.toLocaleLowerCase())}})]})},i=t(4),d=t.n(i),l="/api/persons",f=function(){return d.a.get(l).then((function(e){return e.data}))},j=function(e){return d.a.post(l,e).then((function(e){return e.data}))},b=function(e){return d.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},h=function(e,n){return d.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){var n=e.personsToShow,t=e.persons,r=e.setPersons,c=e.handleMessage;return Object(s.jsx)(s.Fragment,{children:n.map((function(e){return Object(s.jsxs)("p",{children:[e.name," ",e.number,Object(s.jsx)("button",{onClick:function(){return function(e){window.confirm("Delete ".concat(e.name,"?"))&&b(e.id).then((function(){r(t.filter((function(n){return n.id!==e.id}))),c(!0,"Deleted ".concat(e.name,"."))})).catch((function(){c(!1,"Information of ".concat(e.name," has been already been removed from server.")),r(t.filter((function(n){return n.id!==e.id})))}))}(e)},children:"delete"})]},e.name)}))})},O=function(e){var n=e.persons,t=e.setPersons,r=e.handleMessage,c=Object(a.useState)(""),u=Object(o.a)(c,2),i=u[0],d=u[1],l=Object(a.useState)(""),f=Object(o.a)(l,2),b=f[0],p=f[1];return Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c={name:i,number:b},o=n.filter((function(e){return e.name===i}));if(o.length>0){if(window.confirm("".concat(i," is already added to phonebook, replace the old number with the new one?"))){var a=o[0].id;h(a,c).then((function(e){t(n.map((function(n){return n.id===a?e:n}))),r(!0,"Updated ".concat(i,"."))})).catch((function(e){r(!1,e.response.data.error)}))}}else j(c).then((function(e){t(n.concat(e)),r(!0,"Added ".concat(i,"."))})).catch((function(e){r(!1,e.response.data.error)}));d(""),p("")},children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{value:i,onChange:function(e){d(e.target.value)}})]}),Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{value:b,onChange:function(e){p(e.target.value)}})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})},m=function(e){var n=e.success,t=e.message,r={color:n?"green":"red",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"};return t?Object(s.jsx)("div",{style:r,children:t}):null},x=function(){var e=Object(a.useState)(!0),n=Object(o.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)(null),i=Object(o.a)(c,2),d=i[0],l=i[1],j=Object(a.useState)([]),b=Object(o.a)(j,2),h=b[0],x=b[1],v=Object(a.useState)(""),g=Object(o.a)(v,2),w=g[0],S=g[1];Object(a.useEffect)((function(){f().then((function(e){return x(e)}))}),[]);var k=function(e,n){r(e),l(n),setTimeout((function(){return l(null)}),3e3)},y=h.filter((function(e){return e.name.toLocaleLowerCase().includes(w)}));return Object(s.jsxs)("div",{children:[Object(s.jsx)(m,{success:t,message:d}),Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(u,{filterValue:w,setFilterValue:S}),Object(s.jsx)(O,{persons:h,setPersons:x,handleMessage:k}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(p,{personsToShow:y,persons:h,setPersons:x,handleMessage:k})]})};c.a.render(Object(s.jsx)(x,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.f8e7663b.chunk.js.map